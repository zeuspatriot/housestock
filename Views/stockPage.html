<template name="stock">
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="/" class="navbar-brand">HouseStock</a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="/list/">Shopping list<span class="sr-only">(current)</span></a></li>
                    <li class="active"><a href="/stock/">Stock<span class="sr-only">(current)</span></a></li>
                </ul>
                {{>filters}}
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-md-12">
                <h3>So, we have:</h3>
                <ul class="nav nav-tabs lists">
                    <li role="presentation" class="{{tab.aggr}}"><a href="#" name="aggr">Aggregated List</a></li>
                    <li role="presentation" class="{{tab.full}}"><a href="#" name="full">Full breakdown</a></li>
                </ul>
                {{#unless tab.fullSelected}}
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Category</th>
                            <th>Name</th>
                            <th>Brand</th>
                            <th>Shop</th>
                            <th>Amount</th>
                            <th>Paid</th>
                            <th>Bought at</th>
                            <th>Expires at</th>
                            <th>Controls</th>
                        </tr>
                        </thead>
                        <tbody>
                        {{#each items}}
                                <tr>
                                    <td>{{value.category}}</td>
                                    <td>{{value.name}}{{#if value.units}}, {{value.units}}{{/if}}</td>
                                    <td>{{value.brand}}</td>
                                    <td>{{value.shop}}</td>
                                    <td>x {{#if value.hasWeight}} {{value.weight}} kg{{/if}}{{#unless value.hasWeight}}{{value.amount}}{{/unless}}</td>
                                    <td>{{value.price}} pln</td>
                                    <td>{{value.boughtAt}}</td>
                                    <td>{{value.expire}}</td>
                                    <td>
                                        <button class="btn btn-default used" title="We Ate it" ><span class="glyphicon glyphicon-ice-lolly-tasted" aria-hidden="true"></span></button>
                                        <button class="btn btn-default expired" title="It Expired :(" ><span class="glyphicon glyphicon-hourglass" aria-hidden="true"></span></button>
                                        <button class="btn btn-default remove" title="Remove"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>
                                    </td>
                                </tr>
                        {{/each}}
                        </tbody>
                    </table>
                {{/unless}}
                {{#if tab.fullSelected}}
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Category</th>
                            <th>Name</th>
                            <th>Brand</th>
                            <th>Shop</th>
                            <th>Paid</th>
                            <th>Bought at</th>
                            <th>Expires at</th>
                            <th>Controls</th>
                        </tr>
                        </thead>
                        <tbody>
                        {{#each rawItems}}
                            <tr>
                                <td>{{category}}</td>
                                <td>{{name}}{{#if units}}, {{units}}{{/if}}</td>
                                <td>{{brand}}</td>
                                <td>{{shop}}</td>
                                <td>{{pricePerUnit}} pln</td>
                                <td>{{boughtAt}}</td>
                                <td>{{expire}}</td>
                                <td>
                                    <button class="btn btn-default usedFull" title="We Ate it" ><span class="glyphicon glyphicon-ice-lolly-tasted" aria-hidden="true"></span></button>
                                    <button class="btn btn-default expiredFull" title="It Expired :(" ><span class="glyphicon glyphicon-hourglass" aria-hidden="true"></span></button>
                                <!--<td><button class="btn btn-default editStock" ><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button></td>-->
                                    <button class="btn btn-default removeFull" title="Remove"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>
                                </td>
                            </tr>
                        {{/each}}
                        </tbody>
                    </table>
                {{/if}}
                <div class="greyout"></div>
                {{#each rawItems}}
                    <div class="panel panel-default popup" id="{{_id}}">
                        <div class="panel-heading">Panel heading without title</div>
                        <div class="panel-body">
                            <form class="editProduct">
                                <div class="form-group">
                                    <label for="name">Product name</label>
                                    <input type="text" name="name" required id="name" class="form-control"  placeholder="product name" value="{{name}}" />
                                </div>
                                <div class="form-group">
                                    <label for="pricePerUnit">Price per Unit</label>
                                    <input type="number" name="pricePerUnit" id="pricePerUnit" class="form-control" step="0.01" placeholder="price per unit" value="{{pricePerUnit}}" />
                                </div>
                                <div class="form-group">
                                    <label for="category">Category</label>
                                    <input type="text" name="category" id="category" class="form-control" placeholder="product Category" value="{{category}}" />
                                </div>
                                <div class="form-group">
                                    <label for="units">Units</label>
                                    <input type="number" name="units" id="units" class="form-control" step="0.001" placeholder="units or weight in kilos" value="{{units}}" />
                                </div>
                                <div class="form-group">
                                    <label for="brand">Brand</label>
                                    <input type="text" name="brand" id="brand" class="form-control" placeholder="product Brand" value="{{brand}}"/>
                                </div>
                                <div class="form-group">
                                    <label for="shop">Shop where this product is sold</label>
                                    <input type="text" name="shop" id="shop" class="form-control" placeholder="Shop product bought in" value="{{shop}}" />
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" name="like" id="like" title="like" checked="{{like}}" />
                                        Like this product?
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" name="hasWeight" id="hasWeight" title="Weight" checked="{{hasWeight}}">
                                        Does this a bulk product?
                                    </label>
                                </div>
                                <button class="btn btn-warning" id="editCancel">Cancel</button>
                                <button type="submit" class="btn btn-primary floatRight">Submit changes</button>
                            </form>
                        </div>
                    </div>
                {{/each}}
            </div>
        </div>
    </div>
</template>
